# Kind cluster configuration
# This creates a local Kubernetes cluster optimized for development
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: mlops-cluster

nodes:
  # Control plane node (runs the K8s API server, scheduler, etc.)
  - role: control-plane
    kubeadmConfigPatches:
      - |
        kind: InitConfiguration
        nodeRegistration:
          kubeletExtraArgs:
            node-labels: "ingress-ready=true"
    # Port mappings - expose services on localhost
    extraPortMappings:
      # NodePort for our service
      - containerPort: 30080
        hostPort: 30080
        protocol: TCP
      # HTTP port for Ingress
      - containerPort: 80
        hostPort: 8080
        protocol: TCP
      # HTTPS port for Ingress
      - containerPort: 443
        hostPort: 8443
        protocol: TCP

  # Worker node (runs your application pods)
  - role: worker
  
  # Optional: Add more workers for testing scaling
  # - role: worker

